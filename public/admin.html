<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración - Tienda Online</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- Navbar se carga dinámicamente -->
    
    <main class="container my-4">
        <h1 class="display-4 text-center mb-4">⚙️ Panel de Administración</h1>
        
        <div id="mensajes"></div>
        
        <!-- Tabs -->
        <ul class="nav nav-tabs mb-4" id="adminTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="productos-tab" data-bs-toggle="tab" data-bs-target="#productos" type="button">
                    Productos
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="compras-tab" data-bs-toggle="tab" data-bs-target="#compras" type="button">
                    Compras
                </button>
            </li>
        </ul>
        
        <!-- Tab Content -->
        <div class="tab-content" id="adminTabContent">
            <!-- Tab Productos -->
            <div class="tab-pane fade show active" id="productos" role="tabpanel">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card product-form">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0" id="form-title">Agregar Producto</h5>
                            </div>
                            <div class="card-body">
                                <form id="form-producto" onsubmit="guardarProducto(event)">
                                    <input type="hidden" id="producto-id">
                                    
                                    <div class="mb-3">
                                        <label for="nombre-producto" class="form-label">Nombre *</label>
                                        <input type="text" class="form-control" id="nombre-producto" required>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="descripcion-producto" class="form-label">Descripción</label>
                                        <textarea class="form-control" id="descripcion-producto" rows="3"></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="imagen-producto" class="form-label">Imagen del Producto *</label>
                                        <input type="file" class="form-control" id="imagen-producto" accept="image/*" required>
                                        <small class="form-text text-muted">Formatos permitidos: JPG, PNG, GIF, WEBP (máx. 5MB)</small>
                                        <div id="preview-imagen" class="mt-2" style="display: none;">
                                            <img id="preview-img" src="" alt="Vista previa" style="max-width: 200px; max-height: 200px; border-radius: 5px;">
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="precio-producto" class="form-label">Precio *</label>
                                            <input type="number" class="form-control" id="precio-producto" step="0.01" min="0" required>
                                        </div>
                                        
                                        <div class="col-md-6 mb-3">
                                            <label for="cantidad-producto" class="form-label">Cantidad *</label>
                                            <input type="number" class="form-control" id="cantidad-producto" min="0" required>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="fabricante-producto" class="form-label">Fabricante</label>
                                            <input type="text" class="form-control" id="fabricante-producto">
                                        </div>
                                        
                                        <div class="col-md-6 mb-3">
                                            <label for="origen-producto" class="form-label">Origen</label>
                                            <input type="text" class="form-control" id="origen-producto">
                                        </div>
                                    </div>
                                    
                                    <div class="d-grid gap-2">
                                        <button type="submit" class="btn btn-primary">Guardar Producto</button>
                                        <button type="button" class="btn btn-secondary" onclick="limpiarFormulario()">Limpiar</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-8">
                        <div id="loading-productos"></div>
                        <div id="productos-admin-container">
                            <!-- Los productos se cargarán aquí -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tab Compras -->
            <div class="tab-pane fade" id="compras" role="tabpanel">
                <div id="loading-compras"></div>
                <div id="compras-admin-container">
                    <!-- Las compras se cargarán aquí -->
                </div>
            </div>
        </div>
    </main>

    <footer class="text-center py-3">
        <div class="container">
            <p>&copy; 2024 Tienda Online - Proyecto Final de Programación Web</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/api.js"></script>
    <script src="/js/utils.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/navbar.js"></script>
    <script src="/js/admin.js"></script>
</body>
</html>

